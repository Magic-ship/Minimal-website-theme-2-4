{"version":3,"sources":["components/HeaderBreadcrumbs.js","components/SearchNotFound.js","components/LightboxModal.js","components/EmojiPicker.js","utils/getFileFormat.js","components/_dashboard/chat/ChatAccount.js","components/_dashboard/chat/ChatContactSearch.js","components/_dashboard/chat/ChatConversationItem.js","components/_dashboard/chat/ChatConversationList.js","components/_dashboard/chat/ChatHeaderCompose.js","components/_dashboard/chat/ChatHeaderDetail.js","components/_dashboard/chat/ChatMessageInput.js","components/_dashboard/chat/ChatMessageItem.js","components/_dashboard/chat/ChatMessageList.js","components/_dashboard/chat/ChatRoomAttachment.js","components/_dashboard/chat/ChatRoomOneParticipant.js","components/_dashboard/chat/ChatRoomPopup.js","components/_dashboard/chat/ChatRoomGroupParticipant.js","components/_dashboard/chat/ChatRoom.js","components/_dashboard/chat/ChatSearchResults.js","components/_dashboard/chat/ChatSidebar.js","components/_dashboard/chat/ChatWindow.js","pages/dashboard/Chat.js"],"names":["HeaderBreadcrumbs","links","action","heading","moreLink","sx","other","mb","spacing","direction","alignItems","flexGrow","variant","gutterBottom","flexShrink","isString","href","target","map","noWrap","display","SearchNotFound","searchQuery","align","useStyles","makeStyles","theme","isRTL","backgroundIcon","iconName","backgroundSize","backgroundPosition","backgroundRepeat","backgroundColor","alpha","palette","grey","backgroundImage","createStyles","root","backdropFilter","height","padding","width","justifyContent","marginLeft","borderRadius","shape","outline","borderRadiusSm","left","right","LightboxModal","images","photoIndex","setPhotoIndex","isOpen","onClose","classes","useEffect","document","body","style","overflow","toolbarButtons","length","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","reactModalStyle","overlay","zIndex","wrapperClassName","RootStyle","styled","position","PickerStyle","bottom","boxShadow","customShadows","z20","borderRadiusMd","border","background","paper","color","text","disabled","primary","borderColor","divider","typography","body2","opacity","fill","subtitle2","WebkitBackdropFilter","selected","secondary","EmojiPicker","emojiPicker","value","setValue","alignRight","useTheme","useState","emojiPickerState","SetEmojiPicker","main","title","emoji","onSelect","native","onClickAway","size","onClick","e","preventDefault","icon","smilingFaceFill","FORMAT_IMG","FORMAT_VIDEO","FORMAT_WORD","FORMAT_EXCEL","FORMAT_POWERPOINT","FORMAT_PDF","FORMAT_PHOTOSHOP","FORMAT_ILLUSTRATOR","getFileType","fileUrl","split","pop","getFileName","substring","lastIndexOf","replace","getFileFullName","getIcon","name","component","src","alt","getFileThumb","thumb","format","includes","getFileFormat","Icon","fileFill","STATUS","ChatAccount","user","useAuth","open","setOpen","status","setStatus","Box","MyAvatar","event","currentTarget","cursor","BadgeStatus","Popover","Boolean","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","py","pr","pl","ml","mr","Typography","displayName","email","Tooltip","IconButton","roundPowerSettingsNew","Divider","List","ListItem","disableGutters","px","ListItemIcon","ListItemText","Select","fullWidth","onChange","bgcolor","borderWidth","option","capitalCase","ListItemButton","roundAccountBox","primaryTypographyProps","settings2Fill","marginTop","SearchStyle","OutlinedInput","transition","transitions","create","easing","easeInOut","duration","shorter","z8","ChatContactSearch","query","onFocus","ClickAwayListener","FormControl","placeholder","startAdornment","InputAdornment","searchFill","AvatarWrapperStyle","ChatConversationItem","isSelected","conversation","onSelectConversation","isOpenSidebar","details","currentUserId","otherParticipants","participants","filter","participant","id","displayNames","reduce","names","join","displayText","lastMessage","messages","sender","senderId","message","contentType","getDetails","displayLastActivity","last","createdAt","isGroup","isUnread","unreadCount","isOnlineGroup","item","ListItemAvatar","top","slice","className","Avatar","avatar","secondaryTypographyProps","flexDirection","fontSize","lineHeight","whiteSpace","formatDistanceToNowStrict","Date","addSuffix","ChatConversationList","conversations","activeConversationId","navigate","useNavigate","disablePadding","allIds","conversationId","byId","conversationKey","type","find","username","PATH_DASHBOARD","chat","handleSelectConversation","AutocompleteStyle","minWidth","ChatHeaderCompose","contacts","recipients","onAddRecipient","setQuery","Autocomplete","multiple","disablePortal","popupIcon","clearText","noOptionsText","recipient","onInputChange","options","getOptionLabel","renderOption","props","inputValue","matches","match","parts","parse","checkmarkFill","part","index","highlight","renderTags","getTagProps","Chip","label","renderInput","params","TextField","minHeight","OneAvatar","undefined","fToNow","lastActivity","GroupAvatar","AvatarGroup","max","Link","underline","arrowIosForwardFill","ChatHeaderDetail","phoneFill","videoFill","moreVerticalFill","paddingLeft","ChatMessageInput","onSend","fileInputRef","useRef","setMessage","handleAttach","current","click","handleSend","messageId","uuidv4","attachments","Input","disableUnderline","onKeyUp","key","keyCode","endAdornment","Stack","roundAddPhotoAlternate","attach2Fill","micFill","orientation","flexItem","mx","roundSend","ref","marginBottom","ContentStyle","maxWidth","neutral","InfoStyle","MessageImgStyle","objectFit","ChatMessageItem","onOpenLightbox","senderDetails","isMe","isImage","firstName","ChatMessageList","scrollRef","openLightbox","setOpenLightbox","selectedImage","setSelectedImage","scrollTop","scrollHeight","handleOpenLightbox","url","findIndex","Scrollbar","scrollableNodeProps","p","paddingBottom","FileItemStyle","FileThumbStyle","CollapseButtonStyle","Button","overline","AttachmentItem","file","fDateTime","ChatRoomAttachment","isCollapse","onCollapse","totalAttachment","uniq","flatten","endIcon","arrowIosDownwardFill","Collapse","in","RowIconStyle","RowTextStyle","wordWrap","ChatRoomOneParticipant","pt","pb","mt","textAlign","pinFill","address","phone","emailFill","RowStyle","IconStyle","marginRight","ChatRoomPopup","DialogContent","paragraph","Participant","onClosePopup","onShowPopup","ChatRoomGroupParticipant","selectUserId","onShowPopupUserInfo","disableRipple","HEIGHT","borderLeft","ToggleButtonStyle","borderRight","borderTopLeftRadius","borderBottomLeftRadius","ChatRoom","isMobile","useMediaQuery","breakpoints","down","openSidebar","setOpenSidebar","showInfo","setShowInfo","selectUser","setSelectUser","showAttachment","setShowAttachment","showParticipants","setShowParticipants","arrowIosBackFill","participantId","prev","ChatSearchResults","results","onSelectContact","isFound","result","ChatSidebar","setSearchQuery","searchResults","setSearchResults","isSearchFocused","setSearchFocused","displayResults","useSelector","state","handleChangeSearch","a","axios","get","response","data","console","error","handleSearchSelect","to","new","RouterLink","editFill","ChatWindow","dispatch","useDispatch","pathname","useLocation","useParams","unreadMessages","conversationSelector","mode","displayParticipants","getParticipants","getConversation","resetActiveConversation","markConversationAsRead","handleSendMessage","onSendMessage","Object","values","addRecipients","Chat","themeStretch","useSettings","getConversations","getContacts","Page","Container","Card"],"mappings":"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","file":"static/js/70.81adf104.chunk.js","sourcesContent":["import { isString } from 'lodash';\nimport PropTypes from 'prop-types';\n// material\nimport { Box, Typography, Link, Stack } from '@material-ui/core';\n//\nimport { MBreadcrumbs } from './@material-extend';\n\n// ----------------------------------------------------------------------\n\nHeaderBreadcrumbs.propTypes = {\n  links: PropTypes.array,\n  action: PropTypes.node,\n  heading: PropTypes.string.isRequired,\n  moreLink: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  sx: PropTypes.object\n};\n\nexport default function HeaderBreadcrumbs({ links, action, heading, moreLink = '' || [], sx, ...other }) {\n  return (\n    <Stack sx={sx} mb={5} spacing={2}>\n      <Stack direction=\"row\" alignItems=\"center\">\n        <Box sx={{ flexGrow: 1 }}>\n          <Typography variant=\"h4\" gutterBottom>\n            {heading}\n          </Typography>\n          <MBreadcrumbs links={links} {...other} />\n        </Box>\n\n        {action && <Box sx={{ flexShrink: 0 }}>{action}</Box>}\n      </Stack>\n\n      {isString(moreLink) ? (\n        <Link href={moreLink} target=\"_blank\" variant=\"body2\">\n          {moreLink}\n        </Link>\n      ) : (\n        moreLink.map((href) => (\n          <Link noWrap key={href} href={href} variant=\"body2\" target=\"_blank\" sx={{ display: 'flex' }}>\n            {href}\n          </Link>\n        ))\n      )}\n    </Stack>\n  );\n}\n","import PropTypes from 'prop-types';\n// material\nimport { Paper, Typography } from '@material-ui/core';\n\n// ----------------------------------------------------------------------\n\nSearchNotFound.propTypes = {\n  searchQuery: PropTypes.string\n};\n\nexport default function SearchNotFound({ searchQuery = '', ...other }) {\n  return (\n    <Paper {...other}>\n      <Typography gutterBottom align=\"center\" variant=\"subtitle1\">\n        Not found\n      </Typography>\n      <Typography variant=\"body2\" align=\"center\">\n        No results found for &nbsp;\n        <strong>&quot;{searchQuery}&quot;</strong>. Try checking for typos or using complete words.\n      </Typography>\n    </Paper>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport Lightbox from 'react-image-lightbox';\n// material\nimport { makeStyles, createStyles } from '@material-ui/styles';\nimport { alpha } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\n\n// ----------------------------------------------------------------------\n\nconst useStyles = makeStyles((theme) => {\n  const isRTL = theme.direction === 'rtl';\n\n  const backgroundIcon = (iconName) => ({\n    backgroundSize: '24px 24px',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: alpha(theme.palette.grey[900], 0.8),\n    backgroundImage: `url(\"/static/icons/controls/${iconName}.svg\")`\n  });\n\n  return createStyles({\n    root: {\n      backdropFilter: 'blur(8px)',\n      backgroundColor: alpha(theme.palette.grey[900], 0.88),\n\n      // Toolbar\n      '& .ril__toolbar': {\n        height: 'auto !important',\n        padding: theme.spacing(2, 3),\n        backgroundColor: 'transparent'\n      },\n      '& .ril__toolbarLeftSide': { display: 'none' },\n      '& .ril__toolbarRightSide': {\n        height: 'auto !important',\n        padding: 0,\n        flexGrow: 1,\n        display: 'flex',\n        alignItems: 'center',\n        '& li': {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        '& li:first-child': {\n          flexGrow: 1\n        },\n        '& li:not(:first-child)': {\n          width: theme.spacing(5),\n          height: theme.spacing(5),\n          justifyContent: 'center',\n          marginLeft: theme.spacing(1),\n          borderRadius: theme.shape.borderRadius\n        }\n      },\n\n      // Button\n      '& button:focus': { outline: 'none' },\n      '& .ril__toolbarRightSide button': {\n        width: '100%',\n        height: '100%',\n        '&.ril__zoomInButton': backgroundIcon('maximize-outline'),\n        '&.ril__zoomOutButton': backgroundIcon('minimize-outline'),\n        '&.ril__closeButton': backgroundIcon('close')\n      },\n      '& .ril__navButtons': {\n        padding: theme.spacing(3),\n        borderRadius: theme.shape.borderRadiusSm,\n        '&.ril__navButtonPrev': {\n          left: theme.spacing(2),\n          right: 'auto',\n          ...backgroundIcon(isRTL ? 'arrow-ios-forward' : 'arrow-ios-back')\n        },\n        '&.ril__navButtonNext': {\n          right: theme.spacing(2),\n          left: 'auto',\n          ...backgroundIcon(isRTL ? 'arrow-ios-back' : 'arrow-ios-forward')\n        }\n      }\n    }\n  });\n});\n\n// ----------------------------------------------------------------------\n\nLightboxModal.propTypes = {\n  images: PropTypes.array.isRequired,\n  photoIndex: PropTypes.number,\n  setPhotoIndex: PropTypes.func,\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func\n};\n\nexport default function LightboxModal({ images, photoIndex, setPhotoIndex, isOpen, onClose, ...other }) {\n  const classes = useStyles();\n\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = 'unset';\n    }\n  }, [isOpen]);\n\n  const showIndex = <Typography variant=\"subtitle2\">{`${photoIndex + 1} / ${images.length}`}</Typography>;\n\n  const toolbarButtons = [showIndex];\n  const customStyles = {\n    overlay: {\n      zIndex: 9999\n    }\n  };\n\n  return (\n    <>\n      {isOpen && (\n        <Lightbox\n          mainSrc={images[photoIndex]}\n          nextSrc={images[(photoIndex + 1) % images.length]}\n          prevSrc={images[(photoIndex + images.length - 1) % images.length]}\n          onCloseRequest={onClose}\n          onMovePrevRequest={() => setPhotoIndex((photoIndex + images.length - 1) % images.length)}\n          onMoveNextRequest={() => setPhotoIndex((photoIndex + 1) % images.length)}\n          toolbarButtons={toolbarButtons}\n          reactModalStyle={customStyles}\n          wrapperClassName={classes.root}\n          {...other}\n        />\n      )}\n    </>\n  );\n}\n","import 'emoji-mart/css/emoji-mart.css';\nimport PropTypes from 'prop-types';\nimport { Picker } from 'emoji-mart';\nimport { Icon } from '@iconify/react';\nimport { useState } from 'react';\nimport smilingFaceFill from '@iconify/icons-eva/smiling-face-fill';\n// material\nimport { alpha, useTheme, styled } from '@material-ui/core/styles';\nimport { IconButton, ClickAwayListener } from '@material-ui/core';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')({\n  position: 'relative'\n});\n\nconst PickerStyle = styled('div')(({ theme }) => ({\n  bottom: 40,\n  overflow: 'hidden',\n  position: 'absolute',\n  left: theme.spacing(-2),\n  boxShadow: theme.customShadows.z20,\n  borderRadius: theme.shape.borderRadiusMd,\n  '& .emoji-mart': {\n    border: 'none',\n    backgroundColor: theme.palette.background.paper\n  },\n  '& .emoji-mart-anchor': {\n    color: theme.palette.text.disabled,\n    '&:hover, &:focus, &.emoji-mart-anchor-selected': {\n      color: theme.palette.text.primary\n    }\n  },\n  '& .emoji-mart-bar': { borderColor: theme.palette.divider },\n  '& .emoji-mart-search input': {\n    backgroundColor: 'transparent',\n    color: theme.palette.text.primary,\n    borderColor: theme.palette.grey[500_32],\n    '&::placeholder': {\n      ...theme.typography.body2,\n      color: theme.palette.text.disabled\n    }\n  },\n  '& .emoji-mart-search-icon svg': {\n    opacity: 1,\n    fill: theme.palette.text.disabled\n  },\n  '& .emoji-mart-category-label span': {\n    ...theme.typography.subtitle2,\n    backdropFilter: 'blur(8px)',\n    WebkitBackdropFilter: 'blur(8px)', // Fix on Mobile\n    color: theme.palette.text.primary,\n    backgroundColor: alpha(theme.palette.background.paper, 0.8)\n  },\n  '& .emoji-mart-title-label': { color: theme.palette.text.primary },\n  '& .emoji-mart-category .emoji-mart-emoji:hover:before': {\n    backgroundColor: theme.palette.action.selected\n  },\n  '& .emoji-mart-emoji': { outline: 'none' },\n  '& .emoji-mart-preview-name': {\n    color: theme.palette.text.primary\n  },\n  '& .emoji-mart-preview-shortname, .emoji-mart-preview-emoticon': {\n    color: theme.palette.text.secondary\n  }\n}));\n\n// ----------------------------------------------------------------------\n\nEmojiPicker.propTypes = {\n  disabled: PropTypes.bool,\n  value: PropTypes.string,\n  setValue: PropTypes.func,\n  alignRight: PropTypes.bool\n};\n\nexport default function EmojiPicker({ disabled, value, setValue, alignRight = false, ...other }) {\n  const theme = useTheme();\n  const [emojiPickerState, SetEmojiPicker] = useState(false);\n\n  let emojiPicker;\n  if (emojiPickerState) {\n    emojiPicker = (\n      <Picker\n        color={theme.palette.primary.main}\n        title=\"Pick your emojiâ€¦\"\n        emoji=\"point_up\"\n        onSelect={(emoji) => setValue(value + emoji.native)}\n      />\n    );\n  }\n\n  const triggerPicker = (e) => {\n    e.preventDefault();\n    SetEmojiPicker(!emojiPickerState);\n  };\n\n  const handleClickAway = () => {\n    SetEmojiPicker(false);\n  };\n\n  return (\n    <ClickAwayListener onClickAway={handleClickAway}>\n      <RootStyle {...other}>\n        <PickerStyle\n          sx={{\n            ...(alignRight && {\n              right: -2,\n              left: 'auto !important'\n            })\n          }}\n        >\n          {emojiPicker}\n        </PickerStyle>\n        <IconButton disabled={disabled} size=\"small\" onClick={triggerPicker}>\n          <Icon icon={smilingFaceFill} width={20} height={20} />\n        </IconButton>\n      </RootStyle>\n    </ClickAwayListener>\n  );\n}\n","// material\nimport { Box } from '@material-ui/core';\n//\nimport { Icon } from '@iconify/react';\nimport fileFill from '@iconify/icons-eva/file-fill';\n\n// ----------------------------------------------------------------------\n\nconst FORMAT_IMG = ['jpg', 'jpeg', 'gif', 'bmp', 'png'];\nconst FORMAT_VIDEO = ['m4v', 'avi', 'mpg', 'mp4', 'webm'];\nconst FORMAT_WORD = ['doc', 'docx'];\nconst FORMAT_EXCEL = ['xls', 'xlsx'];\nconst FORMAT_POWERPOINT = ['ppt', 'pptx'];\nconst FORMAT_PDF = ['pdf'];\nconst FORMAT_PHOTOSHOP = ['psd'];\nconst FORMAT_ILLUSTRATOR = ['ai', 'esp'];\n\nexport function getFileType(fileUrl) {\n  return fileUrl.split('.').pop();\n}\n\nexport function getFileName(fileUrl) {\n  return fileUrl.substring(fileUrl.lastIndexOf('/') + 1).replace(/\\.[^/.]+$/, '');\n}\n\nexport function getFileFullName(fileUrl) {\n  return fileUrl.split('/').pop();\n}\n\nexport function getFileFormat(fileUrl) {\n  let format;\n\n  switch (fileUrl.includes(getFileType(fileUrl))) {\n    case FORMAT_IMG.includes(getFileType(fileUrl)):\n      format = 'image';\n      break;\n    case FORMAT_VIDEO.includes(getFileType(fileUrl)):\n      format = 'video';\n      break;\n    case FORMAT_WORD.includes(getFileType(fileUrl)):\n      format = 'word';\n      break;\n    case FORMAT_EXCEL.includes(getFileType(fileUrl)):\n      format = 'excel';\n      break;\n    case FORMAT_POWERPOINT.includes(getFileType(fileUrl)):\n      format = 'powerpoint';\n      break;\n    case FORMAT_PDF.includes(getFileType(fileUrl)):\n      format = 'pdf';\n      break;\n    case FORMAT_PHOTOSHOP.includes(getFileType(fileUrl)):\n      format = 'photoshop';\n      break;\n    case FORMAT_ILLUSTRATOR.includes(getFileType(fileUrl)):\n      format = 'illustrator';\n      break;\n    default:\n      format = getFileType(fileUrl);\n  }\n\n  return format;\n}\n\nconst getIcon = (name) => (\n  <Box component=\"img\" src={`/static/icons/file/${name}.svg`} alt={name} sx={{ width: 28, height: 28 }} />\n);\n\nexport function getFileThumb(fileUrl) {\n  let thumb;\n  switch (getFileFormat(fileUrl)) {\n    case 'image':\n      thumb = <Box component=\"img\" src={fileUrl} alt={fileUrl} sx={{ width: 1, height: 1 }} />;\n      break;\n    case 'video':\n      thumb = getIcon('file_type_video');\n      break;\n    case 'word':\n      thumb = getIcon('file_type_word');\n      break;\n    case 'excel':\n      thumb = getIcon('file_type_excel');\n      break;\n    case 'powerpoint':\n      thumb = getIcon('file_type_powerpoint');\n      break;\n    case 'pdf':\n      thumb = getIcon('file_type_pdf');\n      break;\n    case 'photoshop':\n      thumb = getIcon('file_type_photoshop');\n      break;\n    case 'illustrator':\n      thumb = getIcon('file_type_ai');\n      break;\n    default:\n      thumb = <Box component={Icon} icon={fileFill} sx={{ width: 28, height: 28 }} />;\n  }\n  return thumb;\n}\n","import { Icon } from '@iconify/react';\nimport { useState } from 'react';\nimport { capitalCase } from 'change-case';\nimport settings2Fill from '@iconify/icons-eva/settings-2-fill';\nimport roundAccountBox from '@iconify/icons-ic/round-account-box';\nimport roundPowerSettingsNew from '@iconify/icons-ic/round-power-settings-new';\n// material\nimport {\n  Box,\n  List,\n  Select,\n  Divider,\n  Popover,\n  Tooltip,\n  ListItem,\n  Typography,\n  IconButton,\n  ListItemIcon,\n  ListItemText,\n  ListItemButton\n} from '@material-ui/core';\n// hooks\nimport useAuth from '../../../hooks/useAuth';\n//\nimport MyAvatar from '../../MyAvatar';\nimport BadgeStatus from '../../BadgeStatus';\n\n// ----------------------------------------------------------------------\n\nconst STATUS = ['online', 'invisible', 'away'];\n\nexport default function ChatAccount() {\n  const { user } = useAuth();\n  const [open, setOpen] = useState(null);\n  const [status, setStatus] = useState('online');\n\n  const handleOpen = (event) => {\n    setOpen(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setOpen(null);\n  };\n\n  const handleChangeStatus = (event) => {\n    setStatus(event.target.value);\n  };\n\n  return (\n    <>\n      <Box sx={{ position: 'relative' }}>\n        <MyAvatar onClick={handleOpen} sx={{ cursor: 'pointer', width: 48, height: 48 }} />\n        <BadgeStatus status={status} sx={{ position: 'absolute', bottom: 2, right: 2 }} />\n      </Box>\n\n      <Popover\n        open={Boolean(open)}\n        anchorEl={open}\n        onClose={handleClose}\n        anchorOrigin={{ vertical: 'top', horizontal: 'left' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'left' }}\n      >\n        <Box\n          sx={{\n            py: 2,\n            pr: 1,\n            pl: 2.5,\n            display: 'flex',\n            alignItems: 'center'\n          }}\n        >\n          <MyAvatar />\n\n          <Box sx={{ ml: 2, mr: 3 }}>\n            <Typography noWrap variant=\"subtitle1\">\n              {user.displayName}\n            </Typography>\n            <Typography noWrap variant=\"body2\" sx={{ color: 'text.secondary' }}>\n              {user.email}\n            </Typography>\n          </Box>\n\n          <Tooltip title=\"Log out\">\n            <IconButton>\n              <Icon icon={roundPowerSettingsNew} width={24} height={24} />\n            </IconButton>\n          </Tooltip>\n        </Box>\n\n        <Divider />\n\n        <List>\n          <ListItem disableGutters sx={{ py: 1, px: 2.5 }}>\n            <ListItemIcon>\n              <Box\n                sx={{\n                  width: 24,\n                  height: 24,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center'\n                }}\n              >\n                <BadgeStatus status={status} />\n              </Box>\n            </ListItemIcon>\n            <ListItemText>\n              <Select\n                native\n                fullWidth\n                size=\"small\"\n                value={status}\n                onChange={handleChangeStatus}\n                sx={{\n                  '& svg': { display: `none` },\n                  '& select': {\n                    padding: 0,\n                    typography: 'body2',\n                    '&:focus': { bgcolor: 'transparent' }\n                  },\n                  '& fieldset': { borderWidth: `0 !important` }\n                }}\n              >\n                {STATUS.map((option) => (\n                  <option key={option} value={option}>\n                    {capitalCase(option)}\n                  </option>\n                ))}\n              </Select>\n            </ListItemText>\n          </ListItem>\n\n          <ListItemButton disableGutters sx={{ py: 1, px: 2.5 }}>\n            <ListItemIcon>\n              <Icon icon={roundAccountBox} width={24} height={24} />\n            </ListItemIcon>\n            <ListItemText\n              primary=\"Profile\"\n              primaryTypographyProps={{\n                variant: 'body2'\n              }}\n            />\n          </ListItemButton>\n\n          <ListItemButton disableGutters sx={{ py: 1, px: 2.5 }}>\n            <ListItemIcon>\n              <Icon icon={settings2Fill} width={24} height={24} />\n            </ListItemIcon>\n            <ListItemText\n              primary=\"Settings\"\n              primaryTypographyProps={{\n                variant: 'body2'\n              }}\n            />\n          </ListItemButton>\n        </List>\n      </Popover>\n    </>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport searchFill from '@iconify/icons-eva/search-fill';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Box, FormControl, OutlinedInput, InputAdornment, ClickAwayListener } from '@material-ui/core';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  marginTop: theme.spacing(2)\n}));\n\nconst SearchStyle = styled(OutlinedInput)(({ theme }) => ({\n  transition: theme.transitions.create('box-shadow', {\n    easing: theme.transitions.easing.easeInOut,\n    duration: theme.transitions.duration.shorter\n  }),\n  '&.Mui-focused': { boxShadow: theme.customShadows.z8 },\n  '& fieldset': {\n    borderWidth: `1px !important`,\n    borderColor: `${theme.palette.grey[500_32]} !important`\n  }\n}));\n\n// ----------------------------------------------------------------------\n\nChatContactSearch.propTypes = {\n  query: PropTypes.string,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onClickAway: PropTypes.func\n};\n\nexport default function ChatContactSearch({ query, onChange, onFocus, onClickAway, ...other }) {\n  return (\n    <ClickAwayListener onClickAway={onClickAway}>\n      <RootStyle {...other}>\n        <FormControl fullWidth size=\"small\">\n          <SearchStyle\n            value={query}\n            onFocus={onFocus}\n            onChange={onChange}\n            placeholder=\"Search contacts...\"\n            startAdornment={\n              <InputAdornment position=\"start\">\n                <Box component={Icon} icon={searchFill} sx={{ color: 'text.disabled' }} />\n              </InputAdornment>\n            }\n          />\n        </FormControl>\n      </RootStyle>\n    </ClickAwayListener>\n  );\n}\n","import { last } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { formatDistanceToNowStrict } from 'date-fns';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Box, Avatar, ListItemText, ListItemAvatar, ListItemButton } from '@material-ui/core';\n//\nimport BadgeStatus from '../../BadgeStatus';\n\n// ----------------------------------------------------------------------\n\nconst AVATAR_SIZE = 48;\nconst AVATAR_SIZE_GROUP = 32;\n\nconst RootStyle = styled(ListItemButton)(({ theme }) => ({\n  padding: theme.spacing(1.5, 3),\n  transition: theme.transitions.create('all')\n}));\n\nconst AvatarWrapperStyle = styled('div')({\n  position: 'relative',\n  width: AVATAR_SIZE,\n  height: AVATAR_SIZE,\n  '& .MuiAvatar-img': { borderRadius: '50%' },\n  '& .MuiAvatar-root': { width: '100%', height: '100%' }\n});\n\n// ----------------------------------------------------------------------\n\nconst getDetails = (conversation, currentUserId) => {\n  const otherParticipants = conversation.participants.filter((participant) => participant.id !== currentUserId);\n  const displayNames = otherParticipants.reduce((names, participant) => [...names, participant.name], []).join(', ');\n  let displayText = '';\n  const lastMessage = conversation.messages[conversation.messages.length - 1];\n  if (lastMessage) {\n    const sender = lastMessage.senderId === currentUserId ? 'You: ' : '';\n    const message = lastMessage.contentType === 'image' ? 'Sent a photo' : lastMessage.body;\n    displayText = `${sender}${message}`;\n  }\n  return { otherParticipants, displayNames, displayText };\n};\n\nChatConversationItem.propTypes = {\n  isSelected: PropTypes.bool,\n  conversation: PropTypes.object.isRequired,\n  isOpenSidebar: PropTypes.bool,\n  onSelectConversation: PropTypes.func\n};\n\nexport default function ChatConversationItem({\n  isSelected,\n  conversation,\n  onSelectConversation,\n  isOpenSidebar,\n  ...other\n}) {\n  const details = getDetails(conversation, '8864c717-587d-472a-929a-8e5f298024da-0');\n\n  const displayLastActivity = last(conversation.messages).createdAt;\n  const isGroup = details.otherParticipants.length > 1;\n  const isUnread = conversation.unreadCount > 0;\n  const isOnlineGroup = isGroup && details.otherParticipants.map((item) => item.status).includes('online');\n\n  return (\n    <RootStyle\n      disableGutters\n      onClick={onSelectConversation}\n      sx={{\n        ...(isSelected && { bgcolor: 'action.selected' })\n      }}\n      {...other}\n    >\n      <ListItemAvatar>\n        <Box\n          sx={{\n            ...(isGroup && {\n              position: 'relative',\n              width: AVATAR_SIZE,\n              height: AVATAR_SIZE,\n              '& .avatarWrapper': {\n                position: 'absolute',\n                width: AVATAR_SIZE_GROUP,\n                height: AVATAR_SIZE_GROUP,\n                '&:nth-child(1)': {\n                  left: 0,\n                  zIndex: 9,\n                  bottom: 2,\n                  '& .MuiAvatar-root': {\n                    border: (theme) => `solid 2px ${theme.palette.background.paper}`\n                  }\n                },\n                '&:nth-child(2)': { top: 2, right: 0 }\n              }\n            })\n          }}\n        >\n          {details.otherParticipants.slice(0, 2).map((participant) => (\n            <AvatarWrapperStyle className=\"avatarWrapper\" key={participant.id}>\n              <Avatar alt={participant.name} src={participant.avatar} />\n              {!isGroup && (\n                <BadgeStatus status={participant.status} sx={{ right: 2, bottom: 2, position: 'absolute' }} />\n              )}\n            </AvatarWrapperStyle>\n          ))}\n          {isOnlineGroup && <BadgeStatus status=\"online\" sx={{ right: 2, bottom: 2, position: 'absolute' }} />}\n        </Box>\n      </ListItemAvatar>\n\n      {isOpenSidebar && (\n        <>\n          <ListItemText\n            primary={details.displayNames}\n            primaryTypographyProps={{\n              noWrap: true,\n              variant: 'subtitle2'\n            }}\n            secondary={details.displayText}\n            secondaryTypographyProps={{\n              noWrap: true,\n              variant: isUnread ? 'subtitle2' : 'body2',\n              color: isUnread ? 'textPrimary' : 'textSecondary'\n            }}\n          />\n\n          <Box\n            sx={{\n              ml: 2,\n              height: 44,\n              display: 'flex',\n              alignItems: 'flex-end',\n              flexDirection: 'column'\n            }}\n          >\n            <Box\n              sx={{\n                mb: 1.25,\n                fontSize: 12,\n                lineHeight: '22px',\n                whiteSpace: 'nowrap',\n                color: 'text.disabled'\n              }}\n            >\n              {formatDistanceToNowStrict(new Date(displayLastActivity), {\n                addSuffix: false\n              })}\n            </Box>\n            {isUnread && <BadgeStatus status=\"unread\" size=\"small\" />}\n          </Box>\n        </>\n      )}\n    </RootStyle>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { useNavigate } from 'react-router-dom';\n// material\nimport { List } from '@material-ui/core';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n//\nimport ChatConversationItem from './ChatConversationItem';\n\n// ----------------------------------------------------------------------\n\nChatConversationList.propTypes = {\n  conversations: PropTypes.object,\n  isOpenSidebar: PropTypes.bool,\n  activeConversationId: PropTypes.string\n};\n\nexport default function ChatConversationList({ conversations, isOpenSidebar, activeConversationId, ...other }) {\n  const navigate = useNavigate();\n\n  const handleSelectConversation = (conversationId) => {\n    let conversationKey = '';\n    const conversation = conversations.byId[conversationId];\n    if (conversation.type === 'GROUP') {\n      conversationKey = conversation.id;\n    } else {\n      const otherParticipant = conversation.participants.find(\n        (participant) => participant.id !== '8864c717-587d-472a-929a-8e5f298024da-0'\n      );\n      conversationKey = otherParticipant.username;\n    }\n    navigate(`${PATH_DASHBOARD.chat.root}/${conversationKey}`);\n  };\n\n  return (\n    <List disablePadding {...other}>\n      {conversations.allIds.map((conversationId) => (\n        <ChatConversationItem\n          key={conversationId}\n          isOpenSidebar={isOpenSidebar}\n          conversation={conversations.byId[conversationId]}\n          isSelected={activeConversationId === conversationId}\n          onSelectConversation={() => handleSelectConversation(conversationId)}\n        />\n      ))}\n    </List>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport { useState } from 'react';\nimport parse from 'autosuggest-highlight/parse';\nimport match from 'autosuggest-highlight/match';\nimport checkmarkFill from '@iconify/icons-eva/checkmark-fill';\n// material\nimport { alpha, styled } from '@material-ui/core/styles';\nimport { Box, Avatar, TextField, Typography, Autocomplete, Chip } from '@material-ui/core';\n//\nimport SearchNotFound from '../../SearchNotFound';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(2, 3)\n}));\n\nconst AutocompleteStyle = styled('div')(({ theme }) => ({\n  '& .MuiAutocomplete-root': {\n    minWidth: 280,\n    marginLeft: theme.spacing(2),\n    '&.Mui-focused .MuiAutocomplete-inputRoot': {\n      boxShadow: theme.customShadows.z8\n    }\n  },\n  '& .MuiAutocomplete-inputRoot': {\n    transition: theme.transitions.create('box-shadow', {\n      easing: theme.transitions.easing.easeInOut,\n      duration: theme.transitions.duration.shorter\n    }),\n    '& fieldset': {\n      borderWidth: `1px !important`,\n      borderColor: `${theme.palette.grey[500_32]} !important`\n    }\n  }\n}));\n\n// ----------------------------------------------------------------------\n\nChatHeaderCompose.propTypes = {\n  contacts: PropTypes.array,\n  recipients: PropTypes.array,\n  onAddRecipient: PropTypes.func\n};\n\nexport default function ChatHeaderCompose({ contacts, recipients, onAddRecipient, ...other }) {\n  const [query, setQuery] = useState('');\n\n  const handleChangeQuery = (event) => {\n    setQuery(event.target.value);\n  };\n\n  const handleAddRecipient = (e, recipient) => {\n    setQuery('');\n    if (onAddRecipient) {\n      onAddRecipient(recipient);\n    }\n  };\n\n  return (\n    <RootStyle {...other}>\n      <Typography variant=\"subtitle2\" sx={{ color: 'text.secondary' }}>\n        To:\n      </Typography>\n\n      <AutocompleteStyle>\n        <Autocomplete\n          multiple\n          size=\"small\"\n          disablePortal\n          popupIcon={null}\n          clearText={null}\n          noOptionsText={<SearchNotFound searchQuery={query} />}\n          onChange={handleAddRecipient}\n          onInputChange={handleChangeQuery}\n          options={contacts}\n          getOptionLabel={(recipient) => recipient.name}\n          renderOption={(props, recipient, { inputValue, selected }) => {\n            const { name, avatar } = recipient;\n            const matches = match(name, inputValue);\n            const parts = parse(name, matches);\n            return (\n              <li {...props}>\n                <Box\n                  sx={{\n                    width: 32,\n                    height: 32,\n                    overflow: 'hidden',\n                    borderRadius: '50%',\n                    position: 'relative'\n                  }}\n                >\n                  <Avatar alt={name} src={avatar} />\n                  <Box\n                    sx={{\n                      top: 0,\n                      opacity: 0,\n                      width: '100%',\n                      height: '100%',\n                      display: 'flex',\n                      position: 'absolute',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      bgcolor: (theme) => alpha(theme.palette.grey[900], 0.8),\n                      transition: (theme) =>\n                        theme.transitions.create('opacity', {\n                          easing: theme.transitions.easing.easeInOut,\n                          duration: theme.transitions.duration.shorter\n                        }),\n                      ...(selected && {\n                        opacity: 1,\n                        color: 'primary.main'\n                      })\n                    }}\n                  >\n                    <Icon icon={checkmarkFill} width={20} height={20} />\n                  </Box>\n                </Box>\n                <Box sx={{ ml: 2 }} />\n                {parts.map((part, index) => (\n                  <Typography key={index} variant=\"subtitle2\" color={part.highlight ? 'primary' : 'textPrimary'}>\n                    {part.text}\n                  </Typography>\n                ))}\n              </li>\n            );\n          }}\n          renderTags={(recipients, getTagProps) =>\n            recipients.map((recipient, index) => {\n              const { id, name, avatar } = recipient;\n              return (\n                <Chip\n                  key={id}\n                  size=\"small\"\n                  label={name}\n                  color=\"info\"\n                  avatar={<Avatar alt={name} src={avatar} />}\n                  {...getTagProps({ index })}\n                />\n              );\n            })\n          }\n          renderInput={(params) => <TextField {...params} placeholder={recipients.length === 0 ? 'Recipients' : ''} />}\n        />\n      </AutocompleteStyle>\n    </RootStyle>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport { capitalCase } from 'change-case';\nimport videoFill from '@iconify/icons-eva/video-fill';\nimport phoneFill from '@iconify/icons-eva/phone-fill';\nimport moreVerticalFill from '@iconify/icons-eva/more-vertical-fill';\nimport arrowIosForwardFill from '@iconify/icons-eva/arrow-ios-forward-fill';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Box, Link, Avatar, Typography, AvatarGroup } from '@material-ui/core';\n// utils\nimport { fToNow } from '../../../utils/formatTime';\n//\nimport { MIconButton } from '../../@material-extend';\nimport BadgeStatus from '../../BadgeStatus';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  flexShrink: 0,\n  minHeight: 92,\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(0, 3)\n}));\n\n// ----------------------------------------------------------------------\n\nOneAvatar.propTypes = {\n  participants: PropTypes.array\n};\n\nfunction OneAvatar({ participants }) {\n  const participant = [...participants][0];\n\n  if (participant === undefined) {\n    return null;\n  }\n\n  return (\n    <Box sx={{ display: 'flex', alignItems: 'center' }}>\n      <Box sx={{ position: 'relative' }}>\n        <Avatar src={participant.avatar} alt={participant.name} />\n        <BadgeStatus status={participant.status} sx={{ position: 'absolute', right: 2, bottom: 2 }} />\n      </Box>\n      <Box sx={{ ml: 2 }}>\n        <Typography variant=\"subtitle2\">{participant.name}</Typography>\n        <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\n          {participant.status !== 'offline' ? capitalCase(participant.status) : fToNow(participant.lastActivity)}\n        </Typography>\n      </Box>\n    </Box>\n  );\n}\n\nGroupAvatar.propTypes = {\n  participants: PropTypes.array\n};\n\nfunction GroupAvatar({ participants }) {\n  return (\n    <div>\n      <AvatarGroup\n        max={3}\n        sx={{\n          mb: 0.5,\n          '& .MuiAvatar-root': { width: 32, height: 32 }\n        }}\n      >\n        {participants.map((participant) => (\n          <Avatar key={participant.id} alt={participant.name} src={participant.avatar} />\n        ))}\n      </AvatarGroup>\n      <Link variant=\"body2\" underline=\"none\" component=\"button\" color=\"text.secondary\" onClick={() => {}}>\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          {participants.length} persons\n          <Icon icon={arrowIosForwardFill} />\n        </Box>\n      </Link>\n    </div>\n  );\n}\n\nChatHeaderDetail.propTypes = {\n  participants: PropTypes.array\n};\n\nexport default function ChatHeaderDetail({ participants, ...other }) {\n  const isGroup = participants.length > 1;\n\n  return (\n    <RootStyle {...other}>\n      {isGroup ? <GroupAvatar participants={participants} /> : <OneAvatar participants={participants} />}\n\n      <Box sx={{ flexGrow: 1 }} />\n      <MIconButton>\n        <Icon icon={phoneFill} width={20} height={20} />\n      </MIconButton>\n      <MIconButton>\n        <Icon icon={videoFill} width={20} height={20} />\n      </MIconButton>\n      <MIconButton>\n        <Icon icon={moreVerticalFill} width={20} height={20} />\n      </MIconButton>\n    </RootStyle>\n  );\n}\n","import { v4 as uuidv4 } from 'uuid';\nimport PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport { useRef, useState } from 'react';\nimport micFill from '@iconify/icons-eva/mic-fill';\nimport roundSend from '@iconify/icons-ic/round-send';\nimport attach2Fill from '@iconify/icons-eva/attach-2-fill';\nimport roundAddPhotoAlternate from '@iconify/icons-ic/round-add-photo-alternate';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Input, Divider, IconButton, InputAdornment, Stack } from '@material-ui/core';\n//\nimport EmojiPicker from '../../EmojiPicker';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  minHeight: 56,\n  display: 'flex',\n  position: 'relative',\n  alignItems: 'center',\n  paddingLeft: theme.spacing(2)\n}));\n\n// ----------------------------------------------------------------------\n\nChatMessageInput.propTypes = {\n  disabled: PropTypes.bool,\n  conversationId: PropTypes.string,\n  onSend: PropTypes.func\n};\n\nexport default function ChatMessageInput({ disabled, conversationId, onSend, ...other }) {\n  const fileInputRef = useRef(null);\n  const [message, setMessage] = useState('');\n\n  const handleAttach = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleChangeMessage = (event) => {\n    setMessage(event.target.value);\n  };\n\n  const handleKeyUp = (event) => {\n    if (event.key === 'Enter' || event.keyCode === 13) {\n      handleSend();\n    }\n  };\n\n  const handleSend = () => {\n    if (!message) {\n      return '';\n    }\n    if (onSend) {\n      onSend({\n        conversationId,\n        messageId: uuidv4(),\n        message,\n        contentType: 'text',\n        attachments: [],\n        createdAt: new Date(),\n        senderId: '8864c717-587d-472a-929a-8e5f298024da-0'\n      });\n    }\n    return setMessage('');\n  };\n\n  return (\n    <RootStyle {...other}>\n      <Input\n        disabled={disabled}\n        fullWidth\n        value={message}\n        disableUnderline\n        onKeyUp={handleKeyUp}\n        onChange={handleChangeMessage}\n        placeholder=\"Type a message\"\n        startAdornment={\n          <InputAdornment position=\"start\">\n            <EmojiPicker disabled={disabled} value={message} setValue={setMessage} />\n          </InputAdornment>\n        }\n        endAdornment={\n          <Stack direction=\"row\" spacing={0.5} mr={1.5}>\n            <IconButton disabled={disabled} size=\"small\" onClick={handleAttach}>\n              <Icon icon={roundAddPhotoAlternate} width={24} height={24} />\n            </IconButton>\n            <IconButton disabled={disabled} size=\"small\" onClick={handleAttach}>\n              <Icon icon={attach2Fill} width={24} height={24} />\n            </IconButton>\n            <IconButton disabled={disabled} size=\"small\">\n              <Icon icon={micFill} width={24} height={24} />\n            </IconButton>\n          </Stack>\n        }\n        sx={{ height: '100%' }}\n      />\n\n      <Divider orientation=\"vertical\" flexItem />\n\n      <IconButton color=\"primary\" disabled={!message} onClick={handleSend} sx={{ mx: 1 }}>\n        <Icon icon={roundSend} width={24} height={24} />\n      </IconButton>\n\n      <input type=\"file\" ref={fileInputRef} style={{ display: 'none' }} />\n    </RootStyle>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { formatDistanceToNowStrict } from 'date-fns';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Avatar, Box, Typography } from '@material-ui/core';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  display: 'flex',\n  marginBottom: theme.spacing(3)\n}));\n\nconst ContentStyle = styled('div')(({ theme }) => ({\n  maxWidth: 320,\n  padding: theme.spacing(1.5),\n  marginTop: theme.spacing(0.5),\n  borderRadius: theme.shape.borderRadius,\n  backgroundColor: theme.palette.background.neutral\n}));\n\nconst InfoStyle = styled(Typography)(({ theme }) => ({\n  display: 'flex',\n  marginBottom: theme.spacing(0.75),\n  color: theme.palette.text.secondary\n}));\n\nconst MessageImgStyle = styled('img')(({ theme }) => ({\n  height: 200,\n  minWidth: 296,\n  width: '100%',\n  cursor: 'pointer',\n  objectFit: 'cover',\n  borderRadius: theme.shape.borderRadius\n}));\n\n// ----------------------------------------------------------------------\n\nChatMessageItem.propTypes = {\n  message: PropTypes.object.isRequired,\n  conversation: PropTypes.object.isRequired,\n  onOpenLightbox: PropTypes.func\n};\n\nexport default function ChatMessageItem({ message, conversation, onOpenLightbox, ...other }) {\n  const sender = conversation.participants.find((participant) => participant.id === message.senderId);\n  const senderDetails =\n    message.senderId === '8864c717-587d-472a-929a-8e5f298024da-0'\n      ? { type: 'me' }\n      : { avatar: sender.avatar, name: sender.name };\n\n  const isMe = senderDetails.type === 'me';\n  const isImage = message.contentType === 'image';\n  const firstName = senderDetails.name && senderDetails.name.split(' ')[0];\n\n  return (\n    <RootStyle {...other}>\n      <Box\n        sx={{\n          display: 'flex',\n          ...(isMe && {\n            ml: 'auto'\n          })\n        }}\n      >\n        {senderDetails.type !== 'me' && (\n          <Avatar alt={senderDetails.name} src={senderDetails.avatar} sx={{ width: 32, height: 32 }} />\n        )}\n\n        <Box sx={{ ml: 2 }}>\n          <InfoStyle noWrap variant=\"caption\" sx={{ ...(isMe && { justifyContent: 'flex-end' }) }}>\n            {!isMe && `${firstName},`}&nbsp;\n            {formatDistanceToNowStrict(new Date(message.createdAt), {\n              addSuffix: true\n            })}\n          </InfoStyle>\n\n          <ContentStyle\n            sx={{\n              ...(isMe && {\n                color: 'grey.800',\n                bgcolor: 'primary.lighter'\n              })\n            }}\n          >\n            {isImage ? (\n              <MessageImgStyle alt=\"attachment\" src={message.body} onClick={() => onOpenLightbox(message.body)} />\n            ) : (\n              <Typography variant=\"body2\">{message.body}</Typography>\n            )}\n          </ContentStyle>\n        </Box>\n      </Box>\n    </RootStyle>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { findIndex } from 'lodash';\nimport { useEffect, useState, useRef } from 'react';\n//\nimport Scrollbar from '../../Scrollbar';\nimport LightboxModal from '../../LightboxModal';\nimport ChatMessageItem from './ChatMessageItem';\n\n// ----------------------------------------------------------------------\n\nChatMessageList.propTypes = {\n  conversation: PropTypes.object.isRequired\n};\n\nexport default function ChatMessageList({ conversation }) {\n  const scrollRef = useRef();\n  const [openLightbox, setOpenLightbox] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(null);\n\n  useEffect(() => {\n    const scrollMessagesToBottom = () => {\n      if (scrollRef.current) {\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n      }\n    };\n    scrollMessagesToBottom();\n  }, [conversation.messages]);\n\n  const images = conversation.messages\n    .filter((messages) => messages.contentType === 'image')\n    .map((messages) => messages.body);\n\n  const handleOpenLightbox = (url) => {\n    const selectedImage = findIndex(images, (index) => index === url);\n    setOpenLightbox(true);\n    setSelectedImage(selectedImage);\n  };\n\n  return (\n    <Scrollbar scrollableNodeProps={{ ref: scrollRef }} sx={{ p: 3, flexGrow: 1 }}>\n      {conversation.messages.map((message) => (\n        <ChatMessageItem\n          key={message.id}\n          message={message}\n          conversation={conversation}\n          onOpenLightbox={handleOpenLightbox}\n        />\n      ))}\n\n      <LightboxModal\n        images={images}\n        photoIndex={selectedImage}\n        setPhotoIndex={setSelectedImage}\n        isOpen={openLightbox}\n        onClose={() => setOpenLightbox(false)}\n      />\n    </Scrollbar>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport { uniq, flatten } from 'lodash';\nimport arrowIosForwardFill from '@iconify/icons-eva/arrow-ios-forward-fill';\nimport arrowIosDownwardFill from '@iconify/icons-eva/arrow-ios-downward-fill';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Box, Button, Divider, Collapse, Typography } from '@material-ui/core';\n// utils\nimport { fDateTime } from '../../../utils/formatTime';\nimport { getFileFullName, getFileThumb } from '../../../utils/getFileFormat';\n//\nimport Scrollbar from '../../Scrollbar';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  flexGrow: 1,\n  height: '100%',\n  display: 'flex',\n  overflow: 'hidden',\n  flexDirection: 'column',\n  paddingBottom: theme.spacing(2)\n}));\n\nconst FileItemStyle = styled('div')(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginTop: theme.spacing(2),\n  padding: theme.spacing(0, 2.5)\n}));\n\nconst FileThumbStyle = styled('div')(({ theme }) => ({\n  width: 40,\n  height: 40,\n  flexShrink: 0,\n  display: 'flex',\n  overflow: 'hidden',\n  alignItems: 'center',\n  justifyContent: 'center',\n  color: theme.palette.text.secondary,\n  borderRadius: theme.shape.borderRadius,\n  backgroundColor: theme.palette.grey[500_16]\n}));\n\nconst CollapseButtonStyle = styled(Button)(({ theme }) => ({\n  ...theme.typography.overline,\n  height: 40,\n  flexShrink: 0,\n  borderRadius: 0,\n  padding: theme.spacing(1, 2),\n  justifyContent: 'space-between',\n  color: theme.palette.text.disabled\n}));\n\n// ----------------------------------------------------------------------\n\nAttachmentItem.propTypes = {\n  file: PropTypes.object,\n  fileUrl: PropTypes.string\n};\n\nfunction AttachmentItem({ file, fileUrl }) {\n  return (\n    <FileItemStyle key={fileUrl}>\n      <FileThumbStyle>{getFileThumb(fileUrl)}</FileThumbStyle>\n      <Box sx={{ ml: 1.5, maxWidth: 150 }}>\n        <Typography variant=\"body2\" noWrap>\n          {getFileFullName(fileUrl)}\n        </Typography>\n        <Typography noWrap variant=\"caption\" sx={{ color: 'text.secondary', display: 'block' }}>\n          {fDateTime(file.createdAt)}\n        </Typography>\n      </Box>\n    </FileItemStyle>\n  );\n}\n\nChatRoomAttachment.propTypes = {\n  conversation: PropTypes.object.isRequired,\n  isCollapse: PropTypes.bool,\n  onCollapse: PropTypes.func\n};\n\nexport default function ChatRoomAttachment({ conversation, isCollapse, onCollapse, ...other }) {\n  const totalAttachment = uniq(flatten(conversation.messages.map((item) => item.attachments))).length;\n\n  return (\n    <RootStyle {...other}>\n      <CollapseButtonStyle\n        fullWidth\n        color=\"inherit\"\n        onClick={onCollapse}\n        endIcon={<Icon icon={isCollapse ? arrowIosDownwardFill : arrowIosForwardFill} width={16} height={16} />}\n      >\n        attachment ({totalAttachment})\n      </CollapseButtonStyle>\n\n      {!isCollapse && <Divider />}\n\n      <Scrollbar>\n        <Collapse in={isCollapse}>\n          {conversation.messages.map((file) => (\n            <div key={file.id}>\n              {file.attachments.map((fileUrl) => (\n                <AttachmentItem key={fileUrl} file={file} fileUrl={fileUrl} />\n              ))}\n            </div>\n          ))}\n        </Collapse>\n      </Scrollbar>\n    </RootStyle>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport pinFill from '@iconify/icons-eva/pin-fill';\nimport phoneFill from '@iconify/icons-eva/phone-fill';\nimport emailFill from '@iconify/icons-eva/email-fill';\nimport arrowIosForwardFill from '@iconify/icons-eva/arrow-ios-forward-fill';\nimport arrowIosDownwardFill from '@iconify/icons-eva/arrow-ios-downward-fill';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Box, Avatar, Button, Divider, Collapse, Typography, Stack } from '@material-ui/core';\n\n// ----------------------------------------------------------------------\n\nconst CollapseButtonStyle = styled(Button)(({ theme }) => ({\n  ...theme.typography.overline,\n  height: 40,\n  borderRadius: 0,\n  padding: theme.spacing(1, 2),\n  justifyContent: 'space-between',\n  color: theme.palette.text.disabled\n}));\n\nconst RowIconStyle = styled(Icon)(({ theme }) => ({\n  width: 16,\n  height: 16,\n  marginTop: 4,\n  color: theme.palette.text.secondary\n}));\n\nconst RowTextStyle = styled(Typography)(({ theme }) => ({\n  flexGrow: 1,\n  maxWidth: 160,\n  wordWrap: 'break-word',\n  ...theme.typography.body2\n}));\n\n// ----------------------------------------------------------------------\n\nChatRoomOneParticipant.propTypes = {\n  participants: PropTypes.array.isRequired,\n  isCollapse: PropTypes.bool,\n  onCollapse: PropTypes.func\n};\n\nexport default function ChatRoomOneParticipant({ participants, isCollapse, onCollapse, ...other }) {\n  const participant = [...participants][0];\n\n  if (participant === undefined) {\n    return null;\n  }\n\n  return (\n    <Box {...other}>\n      <Box\n        sx={{\n          pt: 4,\n          pb: 3,\n          display: 'flex',\n          alignItems: 'center',\n          flexDirection: 'column'\n        }}\n      >\n        <Avatar alt={participant.name} src={participant.avatar} sx={{ width: 96, height: 96 }} />\n        <Box sx={{ mt: 2, textAlign: 'center' }}>\n          <Typography variant=\"subtitle1\">{participant.name}</Typography>\n          <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\n            {participant.position}\n          </Typography>\n        </Box>\n      </Box>\n\n      <Divider />\n\n      <CollapseButtonStyle\n        fullWidth\n        color=\"inherit\"\n        onClick={onCollapse}\n        endIcon={<Icon icon={isCollapse ? arrowIosDownwardFill : arrowIosForwardFill} width={16} height={16} />}\n      >\n        information\n      </CollapseButtonStyle>\n\n      <Collapse in={isCollapse}>\n        <Stack spacing={2} sx={{ p: 2.5, pt: 1 }}>\n          <Stack direction=\"row\" spacing={1}>\n            <RowIconStyle icon={pinFill} />\n            <RowTextStyle>{participant.address}</RowTextStyle>\n          </Stack>\n          <Stack direction=\"row\" spacing={1}>\n            <RowIconStyle icon={phoneFill} />\n            <RowTextStyle>{participant.phone}</RowTextStyle>\n          </Stack>\n          <Stack direction=\"row\" spacing={1}>\n            <RowIconStyle icon={emailFill} />\n            <RowTextStyle>{participant.email}</RowTextStyle>\n          </Stack>\n        </Stack>\n      </Collapse>\n    </Box>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport pinFill from '@iconify/icons-eva/pin-fill';\nimport phoneFill from '@iconify/icons-eva/phone-fill';\nimport emailFill from '@iconify/icons-eva/email-fill';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Avatar, Typography, DialogContent } from '@material-ui/core';\n//\nimport { DialogAnimate } from '../../animate';\n\n// ----------------------------------------------------------------------\n\nconst RowStyle = styled('div')(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  marginTop: theme.spacing(1.5)\n}));\n\nconst IconStyle = styled(Icon)(({ theme }) => ({\n  width: 16,\n  height: 16,\n  marginRight: theme.spacing(1),\n  color: theme.palette.text.secondary\n}));\n\n// ----------------------------------------------------------------------\n\nChatRoomPopup.propTypes = {\n  participant: PropTypes.object,\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func\n};\n\nexport default function ChatRoomPopup({ participant, isOpen, onClose, ...other }) {\n  const { name, avatar, position, address, phone, email } = participant;\n\n  return (\n    <DialogAnimate fullWidth maxWidth=\"xs\" open={isOpen} onClose={onClose} {...other}>\n      <DialogContent sx={{ pb: 5, textAlign: 'center' }}>\n        <Avatar\n          alt={name}\n          src={avatar}\n          sx={{\n            mt: 5,\n            mb: 2,\n            mx: 'auto',\n            width: 96,\n            height: 96\n          }}\n        />\n        <Typography variant=\"h6\">{name}</Typography>\n        <Typography variant=\"body2\" paragraph sx={{ color: 'text.secondary' }}>\n          {position}\n        </Typography>\n\n        <RowStyle>\n          <IconStyle icon={pinFill} />\n          <Typography variant=\"body2\">{address}</Typography>\n        </RowStyle>\n        <RowStyle>\n          <IconStyle icon={phoneFill} />\n          <Typography variant=\"body2\">{phone}</Typography>\n        </RowStyle>\n        <RowStyle>\n          <IconStyle icon={emailFill} />\n          <Typography variant=\"body2\">{email}</Typography>\n        </RowStyle>\n      </DialogContent>\n    </DialogAnimate>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport arrowIosForwardFill from '@iconify/icons-eva/arrow-ios-forward-fill';\nimport arrowIosDownwardFill from '@iconify/icons-eva/arrow-ios-downward-fill';\n// material\nimport { styled } from '@material-ui/core/styles';\nimport { Box, List, Avatar, Button, Collapse, ListItemText, ListItemAvatar, ListItemButton } from '@material-ui/core';\n//\nimport Scrollbar from '../../Scrollbar';\nimport BadgeStatus from '../../BadgeStatus';\nimport ChatRoomPopup from './ChatRoomPopup';\n\n// ----------------------------------------------------------------------\n\nconst HEIGHT = 64;\n\nconst CollapseButtonStyle = styled(Button)(({ theme }) => ({\n  ...theme.typography.overline,\n  height: 40,\n  borderRadius: 0,\n  padding: theme.spacing(1, 2),\n  justifyContent: 'space-between',\n  color: theme.palette.text.disabled\n}));\n\n// ----------------------------------------------------------------------\n\nParticipant.propTypes = {\n  participant: PropTypes.object.isRequired,\n  isOpen: PropTypes.bool,\n  onClosePopup: PropTypes.func,\n  onShowPopup: PropTypes.func\n};\n\nfunction Participant({ participant, isOpen, onClosePopup, onShowPopup }) {\n  const { name, avatar, status, position } = participant;\n\n  return (\n    <>\n      <ListItemButton disableGutters onClick={onShowPopup} sx={{ height: HEIGHT, px: 2.5 }}>\n        <ListItemAvatar>\n          <Box sx={{ position: 'relative', width: 40, height: 40 }}>\n            <Avatar alt={name} src={avatar} />\n            <BadgeStatus status={status} sx={{ right: 0, bottom: 0, position: 'absolute' }} />\n          </Box>\n        </ListItemAvatar>\n        <ListItemText\n          primary={name}\n          secondary={position}\n          primaryTypographyProps={{ variant: 'subtitle2', noWrap: true }}\n          secondaryTypographyProps={{ noWrap: true }}\n        />\n      </ListItemButton>\n      <ChatRoomPopup participant={participant} isOpen={isOpen} onClose={onClosePopup} />\n    </>\n  );\n}\n\nChatRoomGroupParticipant.propTypes = {\n  participants: PropTypes.array.isRequired,\n  selectUserId: PropTypes.string,\n  onShowPopupUserInfo: PropTypes.func,\n  isCollapse: PropTypes.bool,\n  onCollapse: PropTypes.func\n};\n\nexport default function ChatRoomGroupParticipant({\n  participants,\n  selectUserId,\n  onShowPopupUserInfo,\n  isCollapse,\n  onCollapse,\n  ...other\n}) {\n  return (\n    <Box {...other}>\n      <CollapseButtonStyle\n        fullWidth\n        disableRipple\n        color=\"inherit\"\n        onClick={onCollapse}\n        endIcon={<Icon icon={isCollapse ? arrowIosDownwardFill : arrowIosForwardFill} width={16} height={16} />}\n      >\n        In room ({participants.length})\n      </CollapseButtonStyle>\n\n      <Box sx={{ height: isCollapse ? HEIGHT * 4 : 0 }}>\n        <Scrollbar>\n          <Collapse in={isCollapse}>\n            <List disablePadding>\n              {participants.map((participant) => (\n                <Participant\n                  key={participant.id}\n                  participant={participant}\n                  isOpen={selectUserId === participant.id}\n                  onShowPopup={() => onShowPopupUserInfo(participant.id)}\n                  onClosePopup={() => onShowPopupUserInfo(null)}\n                />\n              ))}\n            </List>\n          </Collapse>\n        </Scrollbar>\n      </Box>\n    </Box>\n  );\n}\n","import PropTypes from 'prop-types';\nimport { Icon } from '@iconify/react';\nimport { useState, useEffect } from 'react';\nimport arrowIosBackFill from '@iconify/icons-eva/arrow-ios-back-fill';\nimport arrowIosForwardFill from '@iconify/icons-eva/arrow-ios-forward-fill';\n// material\nimport { useTheme, styled } from '@material-ui/core/styles';\nimport { useMediaQuery, Divider, IconButton } from '@material-ui/core';\n//\nimport ChatRoomAttachment from './ChatRoomAttachment';\nimport ChatRoomOneParticipant from './ChatRoomOneParticipant';\nimport ChatRoomGroupParticipant from './ChatRoomGroupParticipant';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  width: 240,\n  flexShrink: 0,\n  display: 'flex',\n  position: 'relative',\n  flexDirection: 'column',\n  borderLeft: `solid 1px ${theme.palette.divider}`,\n  transition: theme.transitions.create('width')\n}));\n\nconst ToggleButtonStyle = styled('div')(({ theme }) => ({\n  borderRight: 0,\n  display: 'flex',\n  overflow: 'hidden',\n  position: 'absolute',\n  alignItems: 'center',\n  top: theme.spacing(1),\n  left: theme.spacing(-4),\n  width: theme.spacing(4),\n  height: theme.spacing(4),\n  justifyContent: 'center',\n  boxShadow: theme.customShadows.z8,\n  border: `solid 1px ${theme.palette.divider}`,\n  borderTopLeftRadius: theme.shape.borderRadius,\n  backgroundColor: theme.palette.background.paper,\n  borderBottomLeftRadius: theme.shape.borderRadius\n}));\n\n// ----------------------------------------------------------------------\n\nChatRoom.propTypes = {\n  conversation: PropTypes.object.isRequired,\n  participants: PropTypes.array.isRequired\n};\n\nexport default function ChatRoom({ conversation, participants, ...other }) {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('lg'));\n  const [openSidebar, setOpenSidebar] = useState(true);\n  const [showInfo, setShowInfo] = useState(true);\n  const [selectUser, setSelectUser] = useState(null);\n  const [showAttachment, setShowAttachment] = useState(true);\n  const [showParticipants, setShowParticipants] = useState(true);\n  const isGroup = participants.length > 1;\n\n  useEffect(() => {\n    if (isMobile) {\n      return setOpenSidebar(false);\n    }\n    return setOpenSidebar(true);\n  }, [isMobile]);\n\n  return (\n    <RootStyle\n      sx={{\n        ...(!openSidebar && {\n          width: 0,\n          '& > *': { overflow: 'hidden' }\n        })\n      }}\n      {...other}\n    >\n      <ToggleButtonStyle>\n        <IconButton onClick={() => setOpenSidebar(!openSidebar)}>\n          <Icon width={16} height={16} icon={openSidebar ? arrowIosForwardFill : arrowIosBackFill} />\n        </IconButton>\n      </ToggleButtonStyle>\n\n      {isGroup ? (\n        <ChatRoomGroupParticipant\n          selectUserId={selectUser}\n          participants={participants}\n          isCollapse={showParticipants}\n          onShowPopupUserInfo={(participantId) => setSelectUser(participantId)}\n          onCollapse={() => setShowParticipants((prev) => !prev)}\n        />\n      ) : (\n        <ChatRoomOneParticipant\n          participants={participants}\n          isCollapse={showInfo}\n          onCollapse={() => setShowInfo((prev) => !prev)}\n        />\n      )}\n      <Divider />\n\n      <ChatRoomAttachment\n        conversation={conversation}\n        isCollapse={showAttachment}\n        onCollapse={() => setShowAttachment((prev) => !prev)}\n      />\n    </RootStyle>\n  );\n}\n","import PropTypes from 'prop-types';\n// material\nimport { List, Avatar, Typography, ListItemText, ListItemAvatar, ListItemButton } from '@material-ui/core';\n//\nimport SearchNotFound from '../../SearchNotFound';\n\n// ----------------------------------------------------------------------\n\nChatSearchResults.propTypes = {\n  query: PropTypes.string,\n  results: PropTypes.array,\n  onSelectContact: PropTypes.func\n};\n\nexport default function ChatSearchResults({ query, results, onSelectContact }) {\n  const isFound = results.length > 0;\n\n  return (\n    <>\n      <Typography paragraph variant=\"subtitle1\" sx={{ px: 3, color: 'text.secondary' }}>\n        Contacts\n      </Typography>\n\n      <List disablePadding>\n        {results.map((result) => (\n          <ListItemButton\n            key={result.id}\n            onClick={() => onSelectContact(result)}\n            sx={{\n              py: 1.5,\n              px: 3\n            }}\n          >\n            <ListItemAvatar>\n              <Avatar alt={result.name} src={result.avatar} />\n            </ListItemAvatar>\n            <ListItemText\n              primary={result.name}\n              primaryTypographyProps={{\n                noWrap: true,\n                variant: 'subtitle2'\n              }}\n            />\n          </ListItemButton>\n        ))}\n      </List>\n      {!isFound && (\n        <SearchNotFound\n          searchQuery={query}\n          sx={{\n            p: 3,\n            mx: 'auto',\n            width: `calc(100% - 48px)`,\n            bgcolor: 'background.neutral'\n          }}\n        />\n      )}\n    </>\n  );\n}\n","import { Icon } from '@iconify/react';\nimport { useState, useEffect } from 'react';\nimport editFill from '@iconify/icons-eva/edit-fill';\n\nimport { useNavigate, Link as RouterLink } from 'react-router-dom';\nimport arrowIosBackFill from '@iconify/icons-eva/arrow-ios-back-fill';\nimport arrowIosForwardFill from '@iconify/icons-eva/arrow-ios-forward-fill';\n// material\nimport { useTheme, styled } from '@material-ui/core/styles';\nimport { Box, useMediaQuery } from '@material-ui/core';\n// redux\nimport { useSelector } from '../../../redux/store';\n// utils\nimport axios from '../../../utils/axios';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n//\nimport { MIconButton } from '../../@material-extend';\nimport Scrollbar from '../../Scrollbar';\nimport ChatAccount from './ChatAccount';\nimport ChatSearchResults from './ChatSearchResults';\nimport ChatContactSearch from './ChatContactSearch';\nimport ChatConversationList from './ChatConversationList';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  width: 320,\n  flexShrink: 0,\n  display: 'flex',\n  flexDirection: 'column',\n  transition: theme.transitions.create('width'),\n  borderRight: `1px solid ${theme.palette.divider}`\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function ChatSidebar() {\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const [openSidebar, setOpenSidebar] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearchFocused, setSearchFocused] = useState(false);\n  const displayResults = searchQuery && isSearchFocused;\n  const { conversations, activeConversationId } = useSelector((state) => state.chat);\n\n  useEffect(() => {\n    if (isMobile) {\n      return setOpenSidebar(false);\n    }\n    return setOpenSidebar(true);\n  }, [isMobile]);\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (!openSidebar) {\n      return setSearchFocused(false);\n    }\n  }, [openSidebar]);\n\n  const handleClickAwaySearch = () => {\n    setSearchFocused(false);\n    setSearchQuery('');\n  };\n\n  const handleChangeSearch = async (event) => {\n    try {\n      const { value } = event.target;\n      setSearchQuery(value);\n      if (value) {\n        const response = await axios.get('/api/chat/search', {\n          params: { query: value }\n        });\n        setSearchResults(response.data.results);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  };\n\n  const handleSearchSelect = (username) => {\n    setSearchFocused(false);\n    setSearchQuery('');\n    navigate(`${PATH_DASHBOARD.chat.root}/${username}`);\n  };\n\n  const handleSelectContact = (result) => {\n    if (handleSearchSelect) {\n      handleSearchSelect(result.username);\n    }\n  };\n\n  return (\n    <RootStyle sx={{ ...(!openSidebar && { width: 96 }) }}>\n      <Box sx={{ py: 2, px: 3 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          {openSidebar && (\n            <>\n              <ChatAccount />\n              <Box sx={{ flexGrow: 1 }} />\n            </>\n          )}\n\n          <MIconButton onClick={() => setOpenSidebar(!openSidebar)}>\n            <Icon width={20} height={20} icon={openSidebar ? arrowIosBackFill : arrowIosForwardFill} />\n          </MIconButton>\n\n          {openSidebar && (\n            <MIconButton to={PATH_DASHBOARD.chat.new} component={RouterLink}>\n              <Icon icon={editFill} width={20} height={20} />\n            </MIconButton>\n          )}\n        </Box>\n\n        {openSidebar && (\n          <ChatContactSearch\n            query={searchQuery}\n            onFocus={handleSearchFocus}\n            onChange={handleChangeSearch}\n            onClickAway={handleClickAwaySearch}\n          />\n        )}\n      </Box>\n\n      <Scrollbar>\n        {!displayResults ? (\n          <ChatConversationList\n            conversations={conversations}\n            isOpenSidebar={openSidebar}\n            activeConversationId={activeConversationId}\n            sx={{ ...(isSearchFocused && { display: 'none' }) }}\n          />\n        ) : (\n          <ChatSearchResults query={searchQuery} results={searchResults} onSelectContact={handleSelectContact} />\n        )}\n      </Scrollbar>\n    </RootStyle>\n  );\n}\n","import { useEffect } from 'react';\nimport { useNavigate, useParams, useLocation } from 'react-router-dom';\n// material\nimport { Box, Divider } from '@material-ui/core';\n// redux\nimport { useDispatch, useSelector } from '../../../redux/store';\nimport {\n  addRecipients,\n  onSendMessage,\n  getConversation,\n  getParticipants,\n  markConversationAsRead,\n  resetActiveConversation\n} from '../../../redux/slices/chat';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n//\nimport ChatRoom from './ChatRoom';\nimport ChatMessageList from './ChatMessageList';\nimport ChatHeaderDetail from './ChatHeaderDetail';\nimport ChatMessageInput from './ChatMessageInput';\nimport ChatHeaderCompose from './ChatHeaderCompose';\n\n// ----------------------------------------------------------------------\n\nconst conversationSelector = (state) => {\n  const { conversations, activeConversationId } = state.chat;\n  const conversation = conversations.byId[activeConversationId];\n  if (conversation) {\n    return conversation;\n  }\n  return {\n    id: null,\n    messages: [],\n    participants: [],\n    unreadMessages: 0\n  };\n};\n\nexport default function ChatWindow() {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n  const { conversationKey } = useParams();\n  const { contacts, recipients, participants, activeConversationId } = useSelector((state) => state.chat);\n  const conversation = useSelector((state) => conversationSelector(state));\n  const mode = conversationKey ? 'DETAIL' : 'COMPOSE';\n\n  const displayParticipants = participants.filter((item) => item.id !== '8864c717-587d-472a-929a-8e5f298024da-0');\n\n  useEffect(() => {\n    const getDetails = async () => {\n      dispatch(getParticipants(conversationKey));\n      try {\n        dispatch(getConversation(conversationKey));\n      } catch (error) {\n        console.error(error);\n        navigate(PATH_DASHBOARD.chat.new);\n      }\n    };\n    if (conversationKey) {\n      getDetails();\n    } else if (activeConversationId) {\n      dispatch(resetActiveConversation());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [conversationKey]);\n\n  useEffect(() => {\n    if (activeConversationId) {\n      dispatch(markConversationAsRead(activeConversationId));\n    }\n  }, [dispatch, activeConversationId]);\n\n  const handleAddRecipient = (recipient) => {\n    dispatch(addRecipients(recipient));\n  };\n\n  const handleSendMessage = async (value) => {\n    try {\n      dispatch(onSendMessage(value));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Box sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column' }}>\n      {mode === 'DETAIL' ? (\n        <ChatHeaderDetail participants={displayParticipants} />\n      ) : (\n        <ChatHeaderCompose\n          recipients={recipients}\n          contacts={Object.values(contacts.byId)}\n          onAddRecipient={handleAddRecipient}\n        />\n      )}\n\n      <Divider />\n\n      <Box sx={{ flexGrow: 1, display: 'flex', overflow: 'hidden' }}>\n        <Box sx={{ display: 'flex', flexGrow: 1, flexDirection: 'column' }}>\n          <ChatMessageList conversation={conversation} />\n\n          <Divider />\n\n          <ChatMessageInput\n            conversationId={activeConversationId}\n            onSend={handleSendMessage}\n            disabled={pathname === PATH_DASHBOARD.chat.new}\n          />\n        </Box>\n\n        {mode === 'DETAIL' && <ChatRoom conversation={conversation} participants={displayParticipants} />}\n      </Box>\n    </Box>\n  );\n}\n","import { useEffect } from 'react';\n// material\nimport { Card, Container } from '@material-ui/core';\n// redux\nimport { useDispatch } from '../../redux/store';\nimport { getConversations, getContacts } from '../../redux/slices/chat';\n// routes\nimport { PATH_DASHBOARD } from '../../routes/paths';\n// hooks\nimport useSettings from '../../hooks/useSettings';\n// components\nimport Page from '../../components/Page';\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs';\nimport { ChatSidebar, ChatWindow } from '../../components/_dashboard/chat';\n\n// ----------------------------------------------------------------------\n\nexport default function Chat() {\n  const { themeStretch } = useSettings();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getConversations());\n    dispatch(getContacts());\n  }, [dispatch]);\n\n  return (\n    <Page title=\"Chat | Minimal-UI\">\n      <Container maxWidth={themeStretch ? false : 'xl'}>\n        <HeaderBreadcrumbs\n          heading=\"Chat\"\n          links={[{ name: 'Dashboard', href: PATH_DASHBOARD.root }, { name: 'Chat' }]}\n        />\n        <Card sx={{ height: '72vh', display: 'flex' }}>\n          <ChatSidebar />\n          <ChatWindow />\n        </Card>\n      </Container>\n    </Page>\n  );\n}\n"],"sourceRoot":""}